<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>InsureCompare | Compare All Insurance Policies in India</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary: #1a237e;
            --secondary: #303f9f;
            --accent: #3d5afe;
            --health: #00c853;
            --car: #ff9100;
            --business: #6200ea;
            --life: #d50000;
            --travel: #0091ea;
            --home: #aa00ff;
            --light: #f5f7ff;
            --dark: #0d1440;
            --gray: #5a6270;
            --shadow: 0 6px 15px rgba(0, 0, 0, 0.1);
            --shadow-heavy: 0 10px 25px rgba(0, 0, 0, 0.15);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Poppins', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: var(--light);
            color: var(--dark);
            line-height: 1.7;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        /* Header */
        header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            padding: 1.5rem 0;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: var(--shadow);
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .logo i {
            font-size: 2.5rem;
        }
        
        .logo-text h1 {
            font-size: 1.8rem;
            font-weight: 800;
        }
        
        .logo-text p {
            font-size: 0.9rem;
            opacity: 0.9;
        }
        
        .nav-tabs {
            display: flex;
            gap: 5px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50px;
            padding: 5px;
        }
        
        .nav-tab {
            padding: 12px 24px;
            border-radius: 50px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            white-space: nowrap;
        }
        
        .nav-tab:hover {
            background: rgba(255, 255, 255, 0.15);
        }
        
        .nav-tab.active {
            background: white;
            color: var(--primary);
        }
        
        .auth-buttons {
            display: flex;
            gap: 15px;
        }
        
        .btn {
            padding: 10px 22px;
            border-radius: 6px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-outline {
            background: transparent;
            border: 2px solid white;
            color: white;
        }
        
        .btn-outline:hover {
            background: white;
            color: var(--primary);
        }
        
        .btn-primary {
            background: var(--accent);
            color: white;
        }
        
        .btn-primary:hover {
            background: #2a48ff;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(61, 90, 254, 0.4);
        }
        
        /* Hero Section */
        .hero {
            padding: 40px 0 30px;
            text-align: center;
        }
        
        .hero h2 {
            font-size: 2.5rem;
            margin-bottom: 15px;
            color: var(--dark);
        }
        
        .hero p {
            font-size: 1.1rem;
            color: var(--gray);
            max-width: 800px;
            margin: 0 auto 20px;
        }
        
        .user-input-summary {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin: 30px auto;
            max-width: 800px;
            box-shadow: var(--shadow);
            text-align: left;
        }
        
        .summary-title {
            color: var(--primary);
            font-size: 1.3rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }
        
        .summary-item {
            padding: 10px 0;
            border-bottom: 1px solid #eee;
        }
        
        .summary-label {
            font-weight: 500;
            color: var(--gray);
            font-size: 0.9rem;
        }
        
        .summary-value {
            font-weight: 600;
            color: var(--primary);
            margin-top: 5px;
        }
        
        /* Main Content */
        .main-content {
            margin: 30px 0;
            min-height: 600px;
        }
        
        /* Results Container */
        .results-container {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: var(--shadow);
        }
        
        .results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 2px solid var(--light);
        }
        
        .results-title {
            color: var(--primary);
            font-size: 1.8rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .sort-filter {
            display: flex;
            gap: 15px;
        }
        
        .select-box {
            padding: 10px 15px;
            border-radius: 6px;
            border: 1px solid #ddd;
            background: white;
            color: var(--dark);
            font-weight: 500;
            cursor: pointer;
        }
        
        .policy-cards {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }
        
        .policy-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: var(--shadow);
            transition: all 0.3s ease;
            border-left: 5px solid var(--accent);
            position: relative;
            animation: fadeIn 0.5s ease;
        }
        
        .policy-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-heavy);
        }
        
        .policy-card.best {
            border-left-color: var(--health);
            background: linear-gradient(to right, white 95%, rgba(0, 200, 83, 0.1) 100%);
        }
        
        .best-badge {
            position: absolute;
            top: 20px;
            right: -10px;
            background: var(--health);
            color: white;
            padding: 8px 25px;
            border-radius: 5px;
            font-weight: 700;
            box-shadow: 0 4px 10px rgba(0, 200, 83, 0.3);
        }
        
        .policy-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 20px;
        }
        
        .policy-title {
            font-size: 1.5rem;
            color: var(--primary);
            font-weight: 700;
        }
        
        .policy-company {
            color: var(--gray);
            font-size: 1.1rem;
            margin-top: 5px;
        }
        
        .policy-rating {
            display: flex;
            align-items: center;
            gap: 5px;
            background: rgba(255, 193, 7, 0.1);
            padding: 8px 15px;
            border-radius: 50px;
            color: #ff9800;
            font-weight: 600;
        }
        
        .policy-features {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .feature-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .feature-item i {
            color: var(--accent);
        }
        
        .policy-details {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin: 25px 0;
            padding: 20px;
            background: rgba(61, 90, 254, 0.03);
            border-radius: 10px;
        }
        
        .detail-item {
            text-align: center;
        }
        
        .detail-label {
            font-size: 0.9rem;
            color: var(--gray);
            margin-bottom: 5px;
        }
        
        .detail-value {
            font-weight: 700;
            color: var(--primary);
        }
        
        .policy-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 25px;
            padding-top: 20px;
            border-top: 1px solid #eee;
        }
        
        .policy-price {
            font-size: 1.8rem;
            font-weight: 800;
            color: var(--primary);
        }
        
        .policy-price span {
            font-size: 1rem;
            color: var(--gray);
            font-weight: 500;
        }
        
        .action-buttons {
            display: flex;
            gap: 15px;
        }
        
        .btn-sm {
            padding: 10px 20px;
            font-size: 0.9rem;
        }
        
        .btn-outline-primary {
            background: transparent;
            border: 2px solid var(--accent);
            color: var(--accent);
        }
        
        .btn-outline-primary:hover {
            background: var(--accent);
            color: white;
        }
        
        /* Analytics Section */
        .analytics-section {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-top: 40px;
            box-shadow: var(--shadow);
            animation: fadeIn 0.5s ease;
        }
        
        .analytics-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }
        
        .insights-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
            margin-top: 20px;
        }
        
        .insight-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
        }
        
        .insight-title {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
            color: var(--primary);
        }
        
        .insight-value {
            font-size: 2rem;
            font-weight: 800;
            color: var(--accent);
            margin-bottom: 10px;
        }
        
        .insight-desc {
            color: var(--gray);
            font-size: 0.95rem;
        }
        
        .chart-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }
        
        .chart-box {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
        }
        
        .chart-title {
            font-size: 1.2rem;
            margin-bottom: 15px;
            color: var(--primary);
        }
        
        /* Chatbot */
        .chatbot-container {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 1000;
        }
        
        .chatbot-button {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: var(--accent);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(61, 90, 254, 0.4);
            transition: all 0.3s ease;
        }
        
        .chatbot-button:hover {
            transform: scale(1.1);
        }
        
        .chatbot-window {
            position: absolute;
            bottom: 80px;
            right: 0;
            width: 350px;
            height: 500px;
            background: white;
            border-radius: 15px;
            box-shadow: var(--shadow-heavy);
            display: none;
            flex-direction: column;
            overflow: hidden;
        }
        
        .chatbot-header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .chatbot-body {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .chat-message {
            max-width: 80%;
            padding: 12px 15px;
            border-radius: 15px;
            font-size: 0.95rem;
        }
        
        .bot-message {
            background: #f0f2ff;
            align-self: flex-start;
            border-bottom-left-radius: 5px;
        }
        
        .user-message {
            background: var(--accent);
            color: white;
            align-self: flex-end;
            border-bottom-right-radius: 5px;
        }
        
        .chatbot-input {
            padding: 20px;
            border-top: 1px solid #eee;
            display: flex;
            gap: 10px;
        }
        
        .chatbot-input input {
            flex: 1;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 50px;
            outline: none;
        }
        
        /* Footer */
        footer {
            background: var(--dark);
            color: white;
            padding: 50px 0 30px;
            margin-top: 80px;
        }
        
        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 40px;
            margin-bottom: 40px;
        }
        
        .footer-section h3 {
            font-size: 1.3rem;
            margin-bottom: 20px;
            color: white;
        }
        
        .footer-links {
            list-style: none;
        }
        
        .footer-links li {
            margin-bottom: 10px;
        }
        
        .footer-links a {
            color: #b0b7d3;
            text-decoration: none;
            transition: color 0.3s ease;
        }
        
        .footer-links a:hover {
            color: white;
        }
        
        .copyright {
            text-align: center;
            padding-top: 30px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: #b0b7d3;
            font-size: 0.9rem;
        }
        
        /* Responsive */
        @media (max-width: 1200px) {
            .policy-details {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 20px;
            }
            
            .nav-tabs {
                width: 100%;
                overflow-x: auto;
                justify-content: flex-start;
                padding: 10px;
            }
            
            .policy-features {
                grid-template-columns: 1fr;
            }
            
            .policy-details {
                grid-template-columns: 1fr;
            }
            
            .policy-actions {
                flex-direction: column;
                gap: 20px;
            }
            
            .chatbot-window {
                width: 300px;
                right: -20px;
            }
            
            .results-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
            
            .sort-filter {
                width: 100%;
                justify-content: space-between;
            }
        }
        
        /* Animation */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease;
        }
        
        /* Loading */
        .loading {
            text-align: center;
            padding: 40px;
            font-size: 1.2rem;
            color: var(--accent);
        }
        
        .loading i {
            font-size: 2rem;
            margin-bottom: 15px;
            display: block;
        }
        
        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: var(--gray);
        }
        
        .empty-state i {
            font-size: 4rem;
            margin-bottom: 20px;
            color: #ddd;
        }
        
        .empty-state h3 {
            font-size: 1.8rem;
            margin-bottom: 15px;
            color: var(--dark);
        }
        
        .empty-state p {
            max-width: 500px;
            margin: 0 auto 30px;
        }
        
        /* Tab Content */
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* Back to Input Button */
        .back-button {
            margin-right: 15px;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-shield-alt"></i>
                    <div class="logo-text">
                        <h1>InsureCompare</h1>
                        <p>Compare all insurance policies in India</p>
                    </div>
                </div>
                
                <div class="nav-tabs">
                    <div class="nav-tab active" data-tab="health">
                        <i class="fas fa-heartbeat"></i> Health
                    </div>
                    <div class="nav-tab" data-tab="car">
                        <i class="fas fa-car"></i> Car
                    </div>
                    <div class="nav-tab" data-tab="business">
                        <i class="fas fa-briefcase"></i> Business
                    </div>
                    <div class="nav-tab" data-tab="life">
                        <i class="fas fa-user"></i> Life
                    </div>
                    <div class="nav-tab" data-tab="travel">
                        <i class="fas fa-plane"></i> Travel
                    </div>
                    <div class="nav-tab" data-tab="home">
                        <i class="fas fa-home"></i> Home
                    </div>
                </div>
                
                <div class="auth-buttons">
                    <button class="btn btn-outline back-button" id="backToInput">
                        <i class="fas fa-arrow-left"></i> Back to Input
                    </button>
                    <button class="btn btn-primary" id="refreshResults">
                        <i class="fas fa-sync-alt"></i> Refresh
                    </button>
                </div>
            </div>
        </div>
    </header>
    
    <!-- Hero Section -->
    <section class="hero">
        <div class="container">
            <h2>Your Personalized Insurance Comparison</h2>
            <p>Based on your requirements, we've compared policies from all insurance companies in India to find the best options for you.</p>
            <div style="margin: 20px 0;">
                <a href="insurance-output.html" style="color: var(--accent); font-weight: 600; text-decoration: none; display: inline-flex; align-items: center; gap: 8px;">
                    <i class="fas fa-chart-bar"></i> Already have data? View Comparison Results
                </a>
            </div>
            <!-- User Input Summary -->
            <div class="user-input-summary" id="userSummary">
                <div class="summary-title">
                    <i class="fas fa-info-circle"></i>
                    <h3>Your Requirements Summary</h3>
                </div>
                <div class="summary-grid" id="summaryContent">
                    <!-- Will be populated by JavaScript -->
                </div>
                <div style="margin-top: 15px; text-align: center;">
                    <button class="btn btn-outline-primary" id="editRequirements">
                        <i class="fas fa-edit"></i> Edit Requirements
                    </button>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Main Content - All Insurance Tabs -->
    <div class="container">
        <!-- Health Insurance Tab -->
        <div class="tab-content active" id="health-tab">
            <div class="main-content">
                <!-- Health Results Container -->
                <div class="results-container">
                    <div class="results-header">
                        <h2 class="results-title">
                            <i class="fas fa-heartbeat"></i>
                            Top Health Insurance Policies
                        </h2>
                        <div class="sort-filter">
                            <select class="select-box" id="healthSortBy">
                                <option value="recommended">Recommended</option>
                                <option value="price-low">Price: Low to High</option>
                                <option value="price-high">Price: High to Low</option>
                                <option value="coverage">Coverage Amount</option>
                                <option value="rating">Customer Rating</option>
                            </select>
                            <select class="select-box" id="healthFilterBy">
                                <option value="all">All Companies</option>
                                <option value="private">Private Companies</option>
                                <option value="public">Public Companies</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="loading" id="healthLoadingResults" style="display: none;">
                        <i class="fas fa-spinner fa-spin"></i>
                        <p>Analyzing your requirements and comparing health insurance policies...</p>
                    </div>
                    
                    <div class="policy-cards" id="healthPolicyCards">
                        <!-- Health insurance cards will be populated by JavaScript -->
                        <div class="empty-state">
                            <i class="fas fa-search"></i>
                            <h3>No Health Insurance Data Yet</h3>
                            <p>We'll show personalized health insurance recommendations here based on your requirements.</p>
                            <p>Please fill out the form on the input website to get started.</p>
                        </div>
                    </div>
                    
                    <!-- Health Analytics Section -->
                    <div class="analytics-section" id="healthAnalyticsSection" style="display: none;">
                        <div class="analytics-header">
                            <h2>Health Insurance Analytics & Insights</h2>
                            <button class="btn btn-outline-primary" id="toggleHealthAnalytics">
                                <i class="fas fa-chart-line"></i> Hide Analytics
                            </button>
                        </div>
                        
                        <div class="insights-container">
                            <div class="insight-card">
                                <div class="insight-title">
                                    <i class="fas fa-percentage"></i>
                                    <h3>Average Premium</h3>
                                </div>
                                <div class="insight-value" id="healthAvgPremium">₹18,500</div>
                                <div class="insight-desc">Across all recommended policies</div>
                            </div>
                            
                            <div class="insight-card">
                                <div class="insight-title">
                                    <i class="fas fa-hospital"></i>
                                    <h3>Network Hospitals</h3>
                                </div>
                                <div class="insight-value" id="healthAvgHospitals">6,250+</div>
                                <div class="insight-desc">Average cashless network hospitals</div>
                            </div>
                            
                            <div class="insight-card">
                                <div class="insight-title">
                                    <i class="fas fa-clock"></i>
                                    <h3>Claim Settlement</h3>
                                </div>
                                <div class="insight-value" id="healthAvgSettlement">94.2%</div>
                                <div class="insight-desc">Average claim settlement ratio</div>
                            </div>
                            
                            <div class="insight-card">
                                <div class="insight-title">
                                    <i class="fas fa-calendar-check"></i>
                                    <h3>Waiting Period</h3>
                                </div>
                                <div class="insight-value" id="healthAvgWaiting">1-2 Years</div>
                                <div class="insight-desc">For pre-existing diseases</div>
                            </div>
                        </div>
                        
                        <div class="chart-container">
                            <div class="chart-box">
                                <h3 class="chart-title">Premium Comparison</h3>
                                <canvas id="healthPremiumChart"></canvas>
                            </div>
                            <div class="chart-box">
                                <h3 class="chart-title">Coverage Features</h3>
                                <canvas id="healthCoverageChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Car Insurance Tab -->
        <div class="tab-content" id="car-tab">
            <div class="main-content">
                <!-- Car Results Container -->
                <div class="results-container">
                    <div class="results-header">
                        <h2 class="results-title">
                            <i class="fas fa-car"></i>
                            Top Car Insurance Policies
                        </h2>
                        <div class="sort-filter">
                            <select class="select-box" id="carSortBy">
                                <option value="recommended">Recommended</option>
                                <option value="price-low">Price: Low to High</option>
                                <option value="price-high">Price: High to Low</option>
                                <option value="coverage">Coverage Amount</option>
                                <option value="rating">Customer Rating</option>
                            </select>
                            <select class="select-box" id="carFilterBy">
                                <option value="all">All Companies</option>
                                <option value="private">Private Companies</option>
                                <option value="public">Public Companies</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="loading" id="carLoadingResults" style="display: none;">
                        <i class="fas fa-spinner fa-spin"></i>
                        <p>Analyzing your requirements and comparing car insurance policies...</p>
                    </div>
                    
                    <div class="policy-cards" id="carPolicyCards">
                        <!-- Car insurance cards will be populated by JavaScript -->
                        <div class="empty-state">
                            <i class="fas fa-search"></i>
                            <h3>No Car Insurance Data Yet</h3>
                            <p>We'll show personalized car insurance recommendations here based on your requirements.</p>
                            <p>Please fill out the form on the input website to get started.</p>
                        </div>
                    </div>
                    
                    <!-- Car Analytics Section -->
                    <div class="analytics-section" id="carAnalyticsSection" style="display: none;">
                        <div class="analytics-header">
                            <h2>Car Insurance Analytics & Insights</h2>
                            <button class="btn btn-outline-primary" id="toggleCarAnalytics">
                                <i class="fas fa-chart-line"></i> Hide Analytics
                            </button>
                        </div>
                        
                        <div class="insights-container">
                            <div class="insight-card">
                                <div class="insight-title">
                                    <i class="fas fa-percentage"></i>
                                    <h3>Average Premium</h3>
                                </div>
                                <div class="insight-value" id="carAvgPremium">₹12,500</div>
                                <div class="insight-desc">Across all recommended policies</div>
                            </div>
                            
                            <div class="insight-card">
                                <div class="insight-title">
                                    <i class="fas fa-wrench"></i>
                                    <h3>Cashless Garages</h3>
                                </div>
                                <div class="insight-value" id="carAvgGarages">4,500+</div>
                                <div class="insight-desc">Average cashless repair network</div>
                            </div>
                            
                            <div class="insight-card">
                                <div class="insight-title">
                                    <i class="fas fa-clock"></i>
                                    <h3>Claim Settlement</h3>
                                </div>
                                <div class="insight-value" id="carAvgSettlement">92.8%</div>
                                <div class="insight-desc">Average claim settlement ratio</div>
                            </div>
                            
                            <div class="insight-card">
                                <div class="insight-title">
                                    <i class="fas fa-tachometer-alt"></i>
                                    <h3>Claim Processing</h3>
                                </div>
                                <div class="insight-value" id="carAvgProcessing">7-10 Days</div>
                                <div class="insight-desc">Average claim processing time</div>
                            </div>
                        </div>
                        
                        <div class="chart-container">
                            <div class="chart-box">
                                <h3 class="chart-title">Premium Comparison</h3>
                                <canvas id="carPremiumChart"></canvas>
                            </div>
                            <div class="chart-box">
                                <h3 class="chart-title">Add-on Coverage</h3>
                                <canvas id="carCoverageChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Business Insurance Tab -->
        <div class="tab-content" id="business-tab">
            <div class="main-content">
                <!-- Business Results Container -->
                <div class="results-container">
                    <div class="results-header">
                        <h2 class="results-title">
                            <i class="fas fa-briefcase"></i>
                            Top Business Insurance Policies
                        </h2>
                        <div class="sort-filter">
                            <select class="select-box" id="businessSortBy">
                                <option value="recommended">Recommended</option>
                                <option value="price-low">Price: Low to High</option>
                                <option value="price-high">Price: High to Low</option>
                                <option value="coverage">Coverage Amount</option>
                                <option value="rating">Customer Rating</option>
                            </select>
                            <select class="select-box" id="businessFilterBy">
                                <option value="all">All Companies</option>
                                <option value="private">Private Companies</option>
                                <option value="public">Public Companies</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="loading" id="businessLoadingResults" style="display: none;">
                        <i class="fas fa-spinner fa-spin"></i>
                        <p>Analyzing your requirements and comparing business insurance policies...</p>
                    </div>
                    
                    <div class="policy-cards" id="businessPolicyCards">
                        <!-- Business insurance cards will be populated by JavaScript -->
                        <div class="empty-state">
                            <i class="fas fa-search"></i>
                            <h3>No Business Insurance Data Yet</h3>
                            <p>We'll show personalized business insurance recommendations here based on your requirements.</p>
                            <p>Please fill out the form on the input website to get started.</p>
                        </div>
                    </div>
                    
                    <!-- Business Analytics Section -->
                    <div class="analytics-section" id="businessAnalyticsSection" style="display: none;">
                        <div class="analytics-header">
                            <h2>Business Insurance Analytics & Insights</h2>
                            <button class="btn btn-outline-primary" id="toggleBusinessAnalytics">
                                <i class="fas fa-chart-line"></i> Hide Analytics
                            </button>
                        </div>
                        
                        <div class="insights-container">
                            <div class="insight-card">
                                <div class="insight-title">
                                    <i class="fas fa-percentage"></i>
                                    <h3>Average Premium</h3>
                                </div>
                                <div class="insight-value" id="businessAvgPremium">₹1,25,000</div>
                                <div class="insight-desc">Across all recommended policies</div>
                            </div>
                            
                            <div class="insight-card">
                                <div class="insight-title">
                                    <i class="fas fa-building"></i>
                                    <h3>Property Coverage</h3>
                                </div>
                                <div class="insight-value" id="businessPropertyCoverage">₹2-5 Cr</div>
                                <div class="insight-desc">Average property coverage limit</div>
                            </div>
                            
                            <div class="insight-card">
                                <div class="insight-title">
                                    <i class="fas fa-clock"></i>
                                    <h3>Claim Settlement</h3>
                                </div>
                                <div class="insight-value" id="businessAvgSettlement">91.5%</div>
                                <div class="insight-desc">Average claim settlement ratio</div>
                            </div>
                            
                            <div class="insight-card">
                                <div class="insight-title">
                                    <i class="fas fa-user-tie"></i>
                                    <h3>Liability Limit</h3>
                                </div>
                                <div class="insight-value" id="businessLiabilityLimit">₹1-3 Cr</div>
                                <div class="insight-desc">Average liability coverage</div>
                            </div>
                        </div>
                        
                        <div class="chart-container">
                            <div class="chart-box">
                                <h3 class="chart-title">Premium Comparison</h3>
                                <canvas id="businessPremiumChart"></canvas>
                            </div>
                            <div class="chart-box">
                                <h3 class="chart-title">Coverage Types</h3>
                                <canvas id="businessCoverageChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Life Insurance Tab -->
        <div class="tab-content" id="life-tab">
            <div class="main-content">
                <!-- Life Results Container -->
                <div class="results-container">
                    <div class="results-header">
                        <h2 class="results-title">
                            <i class="fas fa-user"></i>
                            Top Life Insurance Policies
                        </h2>
                        <div class="sort-filter">
                            <select class="select-box" id="lifeSortBy">
                                <option value="recommended">Recommended</option>
                                <option value="price-low">Price: Low to High</option>
                                <option value="price-high">Price: High to Low</option>
                                <option value="coverage">Coverage Amount</option>
                                <option value="rating">Customer Rating</option>
                            </select>
                            <select class="select-box" id="lifeFilterBy">
                                <option value="all">All Companies</option>
                                <option value="private">Private Companies</option>
                                <option value="public">Public Companies</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="loading" id="lifeLoadingResults" style="display: none;">
                        <i class="fas fa-spinner fa-spin"></i>
                        <p>Analyzing your requirements and comparing life insurance policies...</p>
                    </div>
                    
                    <div class="policy-cards" id="lifePolicyCards">
                        <!-- Life insurance cards will be populated by JavaScript -->
                        <div class="empty-state">
                            <i class="fas fa-search"></i>
                            <h3>No Life Insurance Data Yet</h3>
                            <p>We'll show personalized life insurance recommendations here based on your requirements.</p>
                            <p>Please fill out the form on the input website to get started.</p>
                        </div>
                    </div>
                    
                    <!-- Life Analytics Section -->
                    <div class="analytics-section" id="lifeAnalyticsSection" style="display: none;">
                        <div class="analytics-header">
                            <h2>Life Insurance Analytics & Insights</h2>
                            <button class="btn btn-outline-primary" id="toggleLifeAnalytics">
                                <i class="fas fa-chart-line"></i> Hide Analytics
                            </button>
                        </div>
                        
                        <div class="insights-container">
                            <div class="insight-card">
                                <div class="insight-title">
                                    <i class="fas fa-percentage"></i>
                                    <h3>Average Premium</h3>
                                </div>
                                <div class="insight-value" id="lifeAvgPremium">₹25,000/yr</div>
                                <div class="insight-desc">Across all recommended policies</div>
                            </div>
                            
                            <div class="insight-card">
                                <div class="insight-title">
                                    <i class="fas fa-chart-line"></i>
                                    <h3>Returns Potential</h3>
                                </div>
                                <div class="insight-value" id="lifeAvgReturns">8-12%</div>
                                <div class="insight-desc">Average annual returns (ULIPs)</div>
                            </div>
                            
                            <div class="insight-card">
                                <div class="insight-title">
                                    <i class="fas fa-clock"></i>
                                    <h3>Claim Settlement</h3>
                                </div>
                                <div class="insight-value" id="lifeAvgSettlement">97.5%</div>
                                <div class="insight-desc">Average claim settlement ratio</div>
                            </div>
                            
                            <div class="insight-card">
                                <div class="insight-title">
                                    <i class="fas fa-calendar-alt"></i>
                                    <h3>Policy Term</h3>
                                </div>
                                <div class="insight-value" id="lifeAvgTerm">20-30 Years</div>
                                <div class="insight-desc">Average policy duration</div>
                            </div>
                        </div>
                        
                        <div class="chart-container">
                            <div class="chart-box">
                                <h3 class="chart-title">Premium Comparison</h3>
                                <canvas id="lifePremiumChart"></canvas>
                            </div>
                            <div class="chart-box">
                                <h3 class="chart-title">Policy Types</h3>
                                <canvas id="lifeTypeChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Travel Insurance Tab -->
        <div class="tab-content" id="travel-tab">
            <div class="main-content">
                <!-- Travel Results Container -->
                <div class="results-container">
                    <div class="results-header">
                        <h2 class="results-title">
                            <i class="fas fa-plane"></i>
                            Top Travel Insurance Policies
                        </h2>
                        <div class="sort-filter">
                            <select class="select-box" id="travelSortBy">
                                <option value="recommended">Recommended</option>
                                <option value="price-low">Price: Low to High</option>
                                <option value="price-high">Price: High to Low</option>
                                <option value="coverage">Coverage Amount</option>
                                <option value="rating">Customer Rating</option>
                            </select>
                            <select class="select-box" id="travelFilterBy">
                                <option value="all">All Companies</option>
                                <option value="private">Private Companies</option>
                                <option value="public">Public Companies</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="loading" id="travelLoadingResults" style="display: none;">
                        <i class="fas fa-spinner fa-spin"></i>
                        <p>Analyzing your requirements and comparing travel insurance policies...</p>
                    </div>
                    
                    <div class="policy-cards" id="travelPolicyCards">
                        <!-- Travel insurance cards will be populated by JavaScript -->
                        <div class="empty-state">
                            <i class="fas fa-search"></i>
                            <h3>No Travel Insurance Data Yet</h3>
                            <p>We'll show personalized travel insurance recommendations here based on your requirements.</p>
                            <p>Please fill out the form on the input website to get started.</p>
                        </div>
                    </div>
                    
                    <!-- Travel Analytics Section -->
                    <div class="analytics-section" id="travelAnalyticsSection" style="display: none;">
                        <div class="analytics-header">
                            <h2>Travel Insurance Analytics & Insights</h2>
                            <button class="btn btn-outline-primary" id="toggleTravelAnalytics">
                                <i class="fas fa-chart-line"></i> Hide Analytics
                            </button>
                        </div>
                        
                        <div class="insights-container">
                            <div class="insight-card">
                                <div class="insight-title">
                                    <i class="fas fa-percentage"></i>
                                    <h3>Average Premium</h3>
                                </div>
                                <div class="insight-value" id="travelAvgPremium">₹3,500</div>
                                <div class="insight-desc">For 7-day international trip</div>
                            </div>
                            
                            <div class="insight-card">
                                <div class="insight-title">
                                    <i class="fas fa-stethoscope"></i>
                                    <h3>Medical Coverage</h3>
                                </div>
                                <div class="insight-value" id="travelMedicalCoverage">₹50 Lakhs</div>
                                <div class="insight-desc">Average medical emergency cover</div>
                            </div>
                            
                            <div class="insight-card">
                                <div class="insight-title">
                                    <i class="fas fa-plane"></i>
                                    <h3>Trip Cancellation</h3>
                                </div>
                                <div class="insight-value" id="travelTripCancel">₹1 Lakh</div>
                                <div class="insight-desc">Average trip cancellation cover</div>
                            </div>
                            
                            <div class="insight-card">
                                <div class="insight-title">
                                    <i class="fas fa-suitcase"></i>
                                    <h3>Baggage Cover</h3>
                                </div>
                                <div class="insight-value" id="travelBaggageCover">₹50,000</div>
                                <div class="insight-desc">Average baggage loss cover</div>
                            </div>
                        </div>
                        
                        <div class="chart-container">
                            <div class="chart-box">
                                <h3 class="chart-title">Premium Comparison</h3>
                                <canvas id="travelPremiumChart"></canvas>
                            </div>
                            <div class="chart-box">
                                <h3 class="chart-title">Coverage Types</h3>
                                <canvas id="travelCoverageChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Home Insurance Tab -->
        <div class="tab-content" id="home-tab">
            <div class="main-content">
                <!-- Home Results Container -->
                <div class="results-container">
                    <div class="results-header">
                        <h2 class="results-title">
                            <i class="fas fa-home"></i>
                            Top Home Insurance Policies
                        </h2>
                        <div class="sort-filter">
                            <select class="select-box" id="homeSortBy">
                                <option value="recommended">Recommended</option>
                                <option value="price-low">Price: Low to High</option>
                                <option value="price-high">Price: High to Low</option>
                                <option value="coverage">Coverage Amount</option>
                                <option value="rating">Customer Rating</option>
                            </select>
                            <select class="select-box" id="homeFilterBy">
                                <option value="all">All Companies</option>
                                <option value="private">Private Companies</option>
                                <option value="public">Public Companies</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="loading" id="homeLoadingResults" style="display: none;">
                        <i class="fas fa-spinner fa-spin"></i>
                        <p>Analyzing your requirements and comparing home insurance policies...</p>
                    </div>
                    
                    <div class="policy-cards" id="homePolicyCards">
                        <!-- Home insurance cards will be populated by JavaScript -->
                        <div class="empty-state">
                            <i class="fas fa-search"></i>
                            <h3>No Home Insurance Data Yet</h3>
                            <p>We'll show personalized home insurance recommendations here based on your requirements.</p>
                            <p>Please fill out the form on the input website to get started.</p>
                        </div>
                    </div>
                    
                    <!-- Home Analytics Section -->
                    <div class="analytics-section" id="homeAnalyticsSection" style="display: none;">
                        <div class="analytics-header">
                            <h2>Home Insurance Analytics & Insights</h2>
                            <button class="btn btn-outline-primary" id="toggleHomeAnalytics">
                                <i class="fas fa-chart-line"></i> Hide Analytics
                            </button>
                        </div>
                        
                        <div class="insights-container">
                            <div class="insight-card">
                                <div class="insight-title">
                                    <i class="fas fa-percentage"></i>
                                    <h3>Average Premium</h3>
                                </div>
                                <div class="insight-value" id="homeAvgPremium">₹8,500/yr</div>
                                <div class="insight-desc">For ₹50L property + ₹20L contents</div>
                            </div>
                            
                            <div class="insight-card">
                                <div class="insight-title">
                                    <i class="fas fa-building"></i>
                                    <h3>Structure Coverage</h3>
                                </div>
                                <div class="insight-value" id="homeStructureCoverage">100%</div>
                                <div class="insight-desc">Average structure coverage</div>
                            </div>
                            
                            <div class="insight-card">
                                <div class="insight-title">
                                    <i class="fas fa-couch"></i>
                                    <h3>Contents Coverage</h3>
                                </div>
                                <div class="insight-value" id="homeContentsCoverage">80-90%</div>
                                <div class="insight-desc">Average contents coverage</div>
                            </div>
                            
                            <div class="insight-card">
                                <div class="insight-title">
                                    <i class="fas fa-users"></i>
                                    <h3>Liability Coverage</h3>
                                </div>
                                <div class="insight-value" id="homeLiabilityCoverage">₹10 Lakhs</div>
                                <div class="insight-desc">Average third-party liability</div>
                            </div>
                        </div>
                        
                        <div class="chart-container">
                            <div class="chart-box">
                                <h3 class="chart-title">Premium Comparison</h3>
                                <canvas id="homePremiumChart"></canvas>
                            </div>
                            <div class="chart-box">
                                <h3 class="chart-title">Coverage Types</h3>
                                <canvas id="homeCoverageChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Chatbot -->
    <div class="chatbot-container">
        <div class="chatbot-button" id="chatbotButton">
            <i class="fas fa-robot"></i>
        </div>
        <div class="chatbot-window" id="chatbotWindow">
            <div class="chatbot-header">
                <div>
                    <h3>InsureBot</h3>
                    <p>Ask me about insurance</p>
                </div>
                <button id="closeChatbot" style="background: none; border: none; color: white; font-size: 1.2rem; cursor: pointer;">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="chatbot-body" id="chatbotBody">
                <div class="chat-message bot-message">
                    Hello! I'm InsureBot. I can help you compare insurance policies, explain terms, and find the best options. How can I assist you today?
                </div>
                <div class="chat-message bot-message">
                    Try asking: "What's the difference between individual and family floater?" or "Which policy is best for diabetes?"
                </div>
            </div>
            <div class="chatbot-input">
                <input type="text" id="chatInput" placeholder="Type your question...">
                <button class="btn btn-primary" id="sendMessage" style="padding: 10px 20px;">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>
    </div>
    
    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>InsureCompare</h3>
                    <p>India's most comprehensive insurance comparison platform. Compare policies from all major companies with advanced analytics.</p>
                    <div style="margin-top: 20px; display: flex; gap: 15px;">
                        <i class="fab fa-facebook-f" style="font-size: 1.2rem; cursor: pointer;"></i>
                        <i class="fab fa-twitter" style="font-size: 1.2rem; cursor: pointer;"></i>
                        <i class="fab fa-linkedin-in" style="font-size: 1.2rem; cursor: pointer;"></i>
                        <i class="fab fa-instagram" style="font-size: 1.2rem; cursor: pointer;"></i>
                    </div>
                </div>
                
                <div class="footer-section">
                    <h3>Insurance Types</h3>
                    <ul class="footer-links">
                        <li><a href="#" class="footer-tab" data-tab="health">Health Insurance</a></li>
                        <li><a href="#" class="footer-tab" data-tab="car">Car Insurance</a></li>
                        <li><a href="#" class="footer-tab" data-tab="business">Business Insurance</a></li>
                        <li><a href="#" class="footer-tab" data-tab="life">Life Insurance</a></li>
                        <li><a href="#" class="footer-tab" data-tab="travel">Travel Insurance</a></li>
                        <li><a href="#" class="footer-tab" data-tab="home">Home Insurance</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h3>Insurance Companies</h3>
                    <ul class="footer-links">
                        <li><a href="#">LIC</a></li>
                        <li><a href="#">HDFC ERGO</a></li>
                        <li><a href="#">ICICI Lombard</a></li>
                        <li><a href="#">Star Health</a></li>
                        <li><a href="#">Bajaj Allianz</a></li>
                        <li><a href="#">SBI General</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h3>Contact Us</h3>
                    <ul class="footer-links">
                        <li><i class="fas fa-envelope"></i> support@insurecompare.com</li>
                        <li><i class="fas fa-phone"></i> 1800-123-4567</li>
                        <li><i class="fas fa-map-marker-alt"></i> Mumbai, India</li>
                    </ul>
                </div>
            </div>
            
            <div class="copyright">
                <p>© 2023 InsureCompare. All rights reserved. | <a href="#" style="color: #b0b7d3;">Privacy Policy</a> | <a href="#" style="color: #b0b7d3;">Terms of Service</a></p>
                <p style="margin-top: 10px; font-size: 0.8rem;">Disclaimer: This tool provides insurance policy recommendations based on the information you provide. It is for informational purposes only. Please verify all policy details directly with the insurance provider before making a purchase decision.</p>
            </div>
        </div>
    </footer>

    <script>
        // Insurance Data for All Types (Same as in your original)
        const insuranceData = {
            health: {
                name: "Health Insurance",
                icon: "fa-heartbeat",
                color: "#00c853",
                types: [
                    {id: "individual", name: "Individual", icon: "fa-user"},
                    {id: "floater", name: "Family Floater", icon: "fa-users"},
                    {id: "senior", name: "Senior Citizen", icon: "fa-user-md"},
                    {id: "critical", name: "Critical Illness", icon: "fa-stethoscope"},
                    {id: "topup", name: "Top-up", icon: "fa-layer-group"}
                ],
                ageOptions: [
                    {id: "18-30", name: "18-30 Years", desc: "Young adult"},
                    {id: "31-45", name: "31-45 Years", desc: "Middle age"},
                    {id: "46-60", name: "46-60 Years", desc: "Pre-senior"},
                    {id: "60+", name: "60+ Years", desc: "Senior citizen"}
                ],
                conditions: [
                    {id: "diabetes", name: "Diabetes", icon: "fa-syringe"},
                    {id: "hypertension", name: "Hypertension", icon: "fa-heartbeat"},
                    {id: "heart", name: "Heart Disease", icon: "fa-heart"},
                    {id: "asthma", name: "Asthma", icon: "fa-lungs"},
                    {id: "thyroid", name: "Thyroid", icon: "fa-weight"},
                    {id: "arthritis", name: "Arthritis", icon: "fa-bone"},
                    {id: "kidney", name: "Kidney Disease", icon: "fa-kidneys"},
                    {id: "none", name: "None", icon: "fa-check"}
                ],
                features: [
                    {id: "cashless", name: "Cashless Hospitalization", icon: "fa-credit-card"},
                    {id: "room", name: "No Room Rent Limit", icon: "fa-bed"},
                    {id: "maternity", name: "Maternity Cover", icon: "fa-baby"},
                    {id: "daycare", name: "Day Care Coverage", icon: "fa-procedures"},
                    {id: "wellness", name: "Wellness Benefits", icon: "fa-apple-alt"},
                    {id: "restore", name: "Restore Benefit", icon: "fa-redo"}
                ],
                policies: [
                    {
                        id: 1,
                        name: "Health AdvantEdge",
                        company: "ICICI Lombard",
                        type: ["individual", "floater"],
                        premium: {individual: 12500, floater: 28500, senior: 18500},
                        coverage: 1000000,
                        rating: 4.5,
                        features: ["Cashless", "No Room Rent", "Day Care", "Pre/Post Hospitalization"],
                        waitingPeriod: "12 months",
                        networkHospitals: 7500,
                        claimRatio: 94.5,
                        bestFor: "Comprehensive coverage with large network",
                        description: "A comprehensive health insurance policy with extensive coverage and wide network of hospitals."
                    },
                    {
                        id: 2,
                        name: "Activ Health",
                        company: "Aditya Birla",
                        type: ["individual", "floater", "senior"],
                        premium: {individual: 11500, floater: 26500, senior: 17500},
                        coverage: 1000000,
                        rating: 4.4,
                        features: ["Cashless", "Maternity", "Wellness", "Day Care"],
                        waitingPeriod: "24 months",
                        networkHospitals: 6500,
                        claimRatio: 93.8,
                        bestFor: "People with pre-existing conditions",
                        description: "Focuses on covering pre-existing conditions with reasonable waiting periods."
                    },
                    {
                        id: 3,
                        name: "Health Companion",
                        company: "HDFC ERGO",
                        type: ["individual", "floater"],
                        premium: {individual: 13500, floater: 29500, senior: 19500},
                        coverage: 1000000,
                        rating: 4.6,
                        features: ["Cashless", "No Waiting", "Restore", "Day Care"],
                        waitingPeriod: "12 months",
                        networkHospitals: 7200,
                        claimRatio: 95.2,
                        bestFor: "Senior citizens and comprehensive coverage",
                        description: "Excellent for senior citizens with comprehensive coverage and restore benefits."
                    },
                    {
                        id: 4,
                        name: "Family Health Optima",
                        company: "Star Health",
                        type: ["floater", "senior"],
                        premium: {individual: 0, floater: 24500, senior: 16500},
                        coverage: 1000000,
                        rating: 4.3,
                        features: ["Cashless", "Maternity", "Wellness", "Pre/Post"],
                        waitingPeriod: "36 months",
                        networkHospitals: 10500,
                        claimRatio: 92.7,
                        bestFor: "Families with diverse health conditions",
                        description: "Specifically designed for families with extensive network coverage."
                    },
                    {
                        id: 5,
                        name: "Comprehensive Health",
                        company: "Bajaj Allianz",
                        type: ["individual", "senior"],
                        premium: {individual: 14500, floater: 0, senior: 20500},
                        coverage: 1000000,
                        rating: 4.7,
                        features: ["Cashless", "No Room Rent", "Day Care", "Restore"],
                        waitingPeriod: "12 months",
                        networkHospitals: 6800,
                        claimRatio: 94.8,
                        bestFor: "Senior citizens and high coverage needs",
                        description: "Premium policy with high coverage limits and excellent benefits."
                    }
                ]
            },
            car: {
                name: "Car Insurance",
                icon: "fa-car",
                color: "#ff9100",
                types: [
                    {id: "comprehensive", name: "Comprehensive", icon: "fa-shield-alt"},
                    {id: "thirdparty", name: "Third Party", icon: "fa-user-shield"},
                    {id: "owndamage", name: "Own Damage", icon: "fa-car-crash"}
                ],
                ageOptions: [
                    {id: "new", name: "New Car (0-3 years)", desc: "Brand new to 3 years"},
                    {id: "mid", name: "Mid Age (4-7 years)", desc: "4 to 7 years old"},
                    {id: "old", name: "Old Car (8+ years)", desc: "8 years or older"}
                ],
                usageTypes: [
                    {id: "personal", name: "Personal Use", icon: "fa-user"},
                    {id: "commercial", name: "Commercial Use", icon: "fa-truck"},
                    {id: "rental", name: "Rental/Taxi", icon: "fa-taxi"}
                ],
                addons: [
                    {id: "zerodep", name: "Zero Depreciation", icon: "fa-percentage"},
                    {id: "engine", name: "Engine Protect", icon: "fa-cog"},
                    {id: "ncb", name: "NCB Protect", icon: "fa-shield-alt"},
                    {id: "key", name: "Key Replacement", icon: "fa-key"},
                    {id: "tire", name: "Tire Protect", icon: "fa-circle"},
                    {id: "roadside", name: "Roadside Assistance", icon: "fa-road"}
                ],
                policies: [
                    {
                        id: 1,
                        name: "Comprehensive Car Protect",
                        company: "ICICI Lombard",
                        type: ["comprehensive", "owndamage"],
                        premium: {new: 18500, mid: 12500, old: 8500},
                        coverage: 1000000,
                        rating: 4.6,
                        features: ["Zero Depreciation", "Engine Protect", "Roadside Assistance", "NCB Protect"],
                        claimRatio: 95.1,
                        bestFor: "New and luxury cars",
                        description: "Comprehensive car insurance with all essential add-ons for complete protection."
                    },
                    {
                        id: 2,
                        name: "Auto Secure",
                        company: "HDFC ERGO",
                        type: ["comprehensive", "thirdparty"],
                        premium: {new: 16500, mid: 11500, old: 7500},
                        coverage: 1000000,
                        rating: 4.5,
                        features: ["Zero Depreciation", "Key Replacement", "Tire Protect", "Roadside Assistance"],
                        claimRatio: 94.8,
                        bestFor: "Family cars with regular use",
                        description: "Reliable car insurance with good network of cashless garages."
                    },
                    {
                        id: 3,
                        name: "Bajaj Allianz Car Insurance",
                        company: "Bajaj Allianz",
                        type: ["comprehensive", "owndamage", "thirdparty"],
                        premium: {new: 19500, mid: 13500, old: 9500},
                        coverage: 1000000,
                        rating: 4.7,
                        features: ["Engine Protect", "NCB Protect", "Roadside Assistance", "Zero Depreciation"],
                        claimRatio: 95.5,
                        bestFor: "Premium car protection",
                        description: "Premium car insurance with extensive coverage and quick claim settlement."
                    },
                    {
                        id: 4,
                        name: "Reliance Car Insurance",
                        company: "Reliance General",
                        type: ["comprehensive", "thirdparty"],
                        premium: {new: 14500, mid: 9500, old: 6500},
                        coverage: 1000000,
                        rating: 4.3,
                        features: ["Roadside Assistance", "Engine Protect", "Key Replacement"],
                        claimRatio: 93.5,
                        bestFor: "Budget-conscious car owners",
                        description: "Affordable car insurance with essential coverage features."
                    },
                    {
                        id: 5,
                        name: "Tata AIG Car Secure",
                        company: "Tata AIG",
                        type: ["comprehensive", "owndamage"],
                        premium: {new: 17500, mid: 12500, old: 8500},
                        coverage: 1000000,
                        rating: 4.6,
                        features: ["Zero Depreciation", "Roadside Assistance", "Tire Protect", "NCB Protect"],
                        claimRatio: 94.9,
                        bestFor: "All types of vehicles",
                        description: "Versatile car insurance suitable for all vehicle types and ages."
                    }
                ]
            },
            business: {
                name: "Business Insurance",
                icon: "fa-briefcase",
                color: "#6200ea",
                types: [
                    {id: "liability", name: "Liability Insurance", icon: "fa-balance-scale"},
                    {id: "property", name: "Property Insurance", icon: "fa-building"},
                    {id: "professional", name: "Professional Indemnity", icon: "fa-user-tie"},
                    {id: "workers", name: "Workers' Compensation", icon: "fa-users"},
                    {id: "cyber", name: "Cyber Insurance", icon: "fa-shield-alt"}
                ],
                sizeOptions: [
                    {id: "small", name: "Small Business", desc: "<10 employees"},
                    {id: "medium", name: "Medium Business", desc: "10-50 employees"},
                    {id: "large", name: "Large Business", desc: "50+ employees"},
                    {id: "startup", name: "Startup", desc: "New ventures"}
                ],
                industries: [
                    {id: "retail", name: "Retail", icon: "fa-store"},
                    {id: "manufacturing", name: "Manufacturing", icon: "fa-industry"},
                    {id: "technology", name: "Technology", icon: "fa-laptop-code"},
                    {id: "healthcare", name: "Healthcare", icon: "fa-hospital"},
                    {id: "construction", name: "Construction", icon: "fa-hard-hat"},
                    {id: "professional", name: "Professional Services", icon: "fa-briefcase"}
                ],
                coverages: [
                    {id: "property", name: "Property Damage", icon: "fa-building"},
                    {id: "liability", name: "General Liability", icon: "fa-balance-scale"},
                    {id: "product", name: "Product Liability", icon: "fa-box"},
                    {id: "professional", name: "Professional Liability", icon: "fa-user-tie"},
                    {id: "cyber", name: "Cyber Liability", icon: "fa-shield-alt"},
                    {id: "business", name: "Business Interruption", icon: "fa-chart-line"}
                ],
                policies: [
                    {
                        id: 1,
                        name: "Business Shield Pro",
                        company: "ICICI Lombard",
                        type: ["liability", "property", "workers"],
                        premium: {small: 45000, medium: 125000, large: 450000, startup: 35000},
                        coverage: 5000000,
                        rating: 4.6,
                        features: ["Property Damage", "General Liability", "Business Interruption", "Cyber Protection"],
                        claimRatio: 95.2,
                        bestFor: "Medium to large businesses",
                        description: "Comprehensive business insurance covering property, liability, and business interruption.",
                        industryFocus: ["manufacturing", "retail", "professional"]
                    },
                    {
                        id: 2,
                        name: "Enterprise Protect",
                        company: "HDFC ERGO",
                        type: ["property", "liability", "professional", "cyber"],
                        premium: {small: 55000, medium: 145000, large: 550000, startup: 45000},
                        coverage: 10000000,
                        rating: 4.7,
                        features: ["Professional Liability", "Cyber Insurance", "Equipment Coverage", "Directors & Officers"],
                        claimRatio: 96.1,
                        bestFor: "Technology and professional services",
                        description: "Advanced business insurance with focus on cyber risks and professional liability.",
                        industryFocus: ["technology", "professional", "healthcare"]
                    },
                    {
                        id: 3,
                        name: "Small Business Secure",
                        company: "Bajaj Allianz",
                        type: ["liability", "property", "workers"],
                        premium: {small: 25000, medium: 85000, large: 0, startup: 20000},
                        coverage: 2000000,
                        rating: 4.4,
                        features: ["Property Insurance", "Liability Coverage", "Workers Comp", "Theft Protection"],
                        claimRatio: 93.8,
                        bestFor: "Small businesses and startups",
                        description: "Affordable business insurance tailored for small businesses and startups.",
                        industryFocus: ["retail", "startup"]
                    },
                    {
                        id: 4,
                        name: "Industrial Guard",
                        company: "New India Assurance",
                        type: ["property", "liability", "workers", "product"],
                        premium: {small: 35000, medium: 95000, large: 350000, startup: 30000},
                        coverage: 5000000,
                        rating: 4.5,
                        features: ["Product Liability", "Equipment Insurance", "Business Interruption", "Marine Cargo"],
                        claimRatio: 94.3,
                        bestFor: "Manufacturing and construction",
                        description: "Specialized insurance for manufacturing and industrial businesses.",
                        industryFocus: ["manufacturing", "construction"]
                    },
                    {
                        id: 5,
                        name: "TechSure Pro",
                        company: "Cholamandalam MS",
                        type: ["professional", "cyber", "liability"],
                        premium: {small: 40000, medium: 110000, large: 400000, startup: 35000},
                        coverage: 3000000,
                        rating: 4.8,
                        features: ["Cyber Liability", "Errors & Omissions", "Data Breach", "Media Liability"],
                        claimRatio: 95.7,
                        bestFor: "Technology companies and IT services",
                        description: "Specialized insurance for tech companies with cyber risk focus.",
                        industryFocus: ["technology"]
                    }
                ]
            },
            life: {
                name: "Life Insurance",
                icon: "fa-user",
                color: "#d50000",
                types: [
                    {id: "term", name: "Term Insurance", icon: "fa-calendar-alt"},
                    {id: "endowment", name: "Endowment Plan", icon: "fa-piggy-bank"},
                    {id: "ulip", name: "ULIP", icon: "fa-chart-line"},
                    {id: "wholelife", name: "Whole Life", icon: "fa-infinity"},
                    {id: "moneyback", name: "Money Back", icon: "fa-money-bill-wave"}
                ],
                termOptions: [
                    {id: "10", name: "10 Years", desc: "Short term coverage"},
                    {id: "20", name: "20 Years", desc: "Medium term coverage"},
                    {id: "30", name: "30 Years", desc: "Long term coverage"},
                    {id: "till60", name: "Till Age 60", desc: "Till retirement"}
                ],
                lifestyle: [
                    {id: "smoker", name: "Smoker", icon: "fa-smoking"},
                    {id: "nonsmoker", name: "Non-Smoker", icon: "fa-ban"},
                    {id: "occasional", name: "Occasional Drinker", icon: "fa-wine-glass"},
                    {id: "hazardous", name: "Hazardous Occupation", icon: "fa-hard-hat"}
                ],
                features: [
                    {id: "critical", name: "Critical Illness", icon: "fa-heartbeat"},
                    {id: "accident", name: "Accidental Death", icon: "fa-car-crash"},
                    {id: "disability", name: "Disability Cover", icon: "fa-wheelchair"},
                    {id: "waiver", name: "Premium Waiver", icon: "fa-hand-holding-usd"},
                    {id: "rider", name: "Additional Riders", icon: "fa-plus-circle"}
                ],
                policies: [
                    {
                        id: 1,
                        name: "iSelect Term Plan",
                        company: "ICICI Prudential",
                        type: ["term"],
                        premium: {10: 8500, 20: 12500, 30: 18500, till60: 22500},
                        coverage: 10000000,
                        rating: 4.7,
                        features: ["Critical Illness", "Accidental Death", "Premium Waiver", "Disability Cover"],
                        claimRatio: 98.2,
                        bestFor: "High coverage at low cost",
                        description: "Pure term insurance with high coverage at affordable premiums."
                    },
                    {
                        id: 2,
                        name: "HDFC Life Click 2 Protect",
                        company: "HDFC Life",
                        type: ["term"],
                        premium: {10: 9200, 20: 13500, 30: 19500, till60: 24500},
                        coverage: 10000000,
                        rating: 4.6,
                        features: ["Critical Illness", "Accidental Death", "Disability Cover", "Additional Riders"],
                        claimRatio: 97.8,
                        bestFor: "Comprehensive term coverage",
                        description: "Term insurance with comprehensive riders and good claim settlement."
                    },
                    {
                        id: 3,
                        name: "Max Life Online Term Plan",
                        company: "Max Life",
                        type: ["term"],
                        premium: {10: 7800, 20: 11500, 30: 17500, till60: 21500},
                        coverage: 10000000,
                        rating: 4.8,
                        features: ["Critical Illness", "Accidental Death", "Premium Waiver"],
                        claimRatio: 98.5,
                        bestFor: "Budget term insurance",
                        description: "Affordable term insurance with essential coverage features."
                    },
                    {
                        id: 4,
                        name: "Bajaj Allianz Future Gain",
                        company: "Bajaj Allianz",
                        type: ["endowment"],
                        premium: {10: 45000, 20: 35000, 30: 30000, till60: 28000},
                        coverage: 5000000,
                        rating: 4.5,
                        features: ["Guaranteed Returns", "Bonus", "Maturity Benefit", "Death Benefit"],
                        claimRatio: 96.5,
                        bestFor: "Savings with insurance",
                        description: "Endowment plan combining insurance with guaranteed returns."
                    },
                    {
                        id: 5,
                        name: "SBI Life - eWealth",
                        company: "SBI Life",
                        type: ["ulip"],
                        premium: {10: 60000, 20: 45000, 30: 38000, till60: 35000},
                        coverage: 5000000,
                        rating: 4.4,
                        features: ["Market Linked Returns", "Flexible Premium", "Partial Withdrawal", "Fund Options"],
                        claimRatio: 95.8,
                        bestFor: "Investment with insurance",
                        description: "ULIP offering market-linked returns with life coverage."
                    }
                ]
            },
            travel: {
                name: "Travel Insurance",
                icon: "fa-plane",
                color: "#0091ea",
                types: [
                    {id: "individual", name: "Individual", icon: "fa-user"},
                    {id: "family", name: "Family", icon: "fa-users"},
                    {id: "student", name: "Student", icon: "fa-graduation-cap"},
                    {id: "senior", name: "Senior Citizen", icon: "fa-user-md"},
                    {id: "business", name: "Business Travel", icon: "fa-briefcase"}
                ],
                destinations: [
                    {id: "asia", name: "Asia", desc: "Asian countries"},
                    {id: "europe", name: "Europe", desc: "European countries"},
                    {id: "usa", name: "USA/Canada", desc: "North America"},
                    {id: "australia", name: "Australia/NZ", desc: "Oceania"},
                    {id: "domestic", name: "Domestic", desc: "Within India"}
                ],
                travellers: [
                    {id: "single", name: "Single Traveller", icon: "fa-user"},
                    {id: "couple", name: "Couple", icon: "fa-heart"},
                    {id: "family", name: "Family", icon: "fa-users"},
                    {id: "group", name: "Group", icon: "fa-user-friends"}
                ],
                coverages: [
                    {id: "medical", name: "Medical Emergency", icon: "fa-stethoscope"},
                    {id: "trip", name: "Trip Cancellation", icon: "fa-plane-slash"},
                    {id: "baggage", name: "Baggage Loss", icon: "fa-suitcase"},
                    {id: "delay", name: "Flight Delay", icon: "fa-clock"},
                    {id: "personal", name: "Personal Accident", icon: "fa-user-injured"},
                    {id: "liability", name: "Personal Liability", icon: "fa-balance-scale"}
                ],
                policies: [
                    {
                        id: 1,
                        name: "Travel Secure Plus",
                        company: "ICICI Lombard",
                        type: ["individual", "family", "student"],
                        premium: {asia: 2500, europe: 4500, usa: 5500, australia: 5000, domestic: 800},
                        coverage: 500000,
                        rating: 4.6,
                        features: ["Medical Emergency", "Trip Cancellation", "Baggage Loss", "Flight Delay"],
                        claimRatio: 94.5,
                        bestFor: "International travel",
                        description: "Comprehensive travel insurance for international trips with extensive coverage."
                    },
                    {
                        id: 2,
                        name: "HDFC ERGO Travel Insurance",
                        company: "HDFC ERGO",
                        type: ["individual", "family", "senior"],
                        premium: {asia: 2200, europe: 4200, usa: 5200, australia: 4800, domestic: 750},
                        coverage: 500000,
                        rating: 4.5,
                        features: ["Medical Emergency", "Trip Cancellation", "Personal Accident", "Baggage Delay"],
                        claimRatio: 93.8,
                        bestFor: "Family travel",
                        description: "Reliable travel insurance with good coverage for families and seniors."
                    },
                    {
                        id: 3,
                        name: "Bajaj Allianz Travel Insurance",
                        company: "Bajaj Allianz",
                        type: ["individual", "family", "business"],
                        premium: {asia: 2800, europe: 4800, usa: 5800, australia: 5300, domestic: 850},
                        coverage: 500000,
                        rating: 4.7,
                        features: ["Medical Emergency", "Trip Cancellation", "Personal Liability", "Flight Delay"],
                        claimRatio: 95.2,
                        bestFor: "Business travel",
                        description: "Premium travel insurance with additional benefits for business travelers."
                    },
                    {
                        id: 4,
                        name: "Reliance Travel Insurance",
                        company: "Reliance General",
                        type: ["individual", "family"],
                        premium: {asia: 2000, europe: 3800, usa: 4800, australia: 4300, domestic: 700},
                        coverage: 500000,
                        rating: 4.3,
                        features: ["Medical Emergency", "Trip Cancellation", "Baggage Loss"],
                        claimRatio: 92.7,
                        bestFor: "Budget travel",
                        description: "Affordable travel insurance with essential coverage for international trips."
                    },
                    {
                        id: 5,
                        name: "Tata AIG Travel Guard",
                        company: "Tata AIG",
                        type: ["individual", "family", "student"],
                        premium: {asia: 2300, europe: 4300, usa: 5300, australia: 4900, domestic: 780},
                        coverage: 500000,
                        rating: 4.6,
                        features: ["Medical Emergency", "Trip Cancellation", "Personal Accident", "Flight Delay"],
                        claimRatio: 94.1,
                        bestFor: "Student travel",
                        description: "Travel insurance with special benefits for students studying abroad."
                    }
                ]
            },
            home: {
                name: "Home Insurance",
                icon: "fa-home",
                color: "#aa00ff",
                types: [
                    {id: "structure", name: "Structure Only", icon: "fa-building"},
                    {id: "contents", name: "Contents Only", icon: "fa-couch"},
                    {id: "comprehensive", name: "Comprehensive", icon: "fa-shield-alt"},
                    {id: "tenant", name: "Tenant's Insurance", icon: "fa-key"},
                    {id: "builder", name: "Builder's Risk", icon: "fa-hard-hat"}
                ],
                locationRisks: [
                    {id: "flood", name: "Flood Prone", icon: "fa-water"},
                    {id: "earthquake", name: "Earthquake Zone", icon: "fa-mountain"},
                    {id: "theft", name: "High Theft Area", icon: "fa-user-secret"},
                    {id: "fire", name: "Fire Hazard", icon: "fa-fire"},
                    {id: "normal", name: "Normal Risk", icon: "fa-check-circle"}
                ],
                coverages: [
                    {id: "fire", name: "Fire & Lightning", icon: "fa-bolt"},
                    {id: "theft", name: "Theft & Burglary", icon: "fa-user-secret"},
                    {id: "natural", name: "Natural Disasters", icon: "fa-tornado"},
                    {id: "liability", name: "Public Liability", icon: "fa-users"},
                    {id: "electronic", name: "Electronic Equipment", icon: "fa-plug"},
                    {id: "valuables", name: "Valuables", icon: "fa-gem"}
                ],
                policies: [
                    {
                        id: 1,
                        name: "Home Shield Supreme",
                        company: "ICICI Lombard",
                        type: ["comprehensive", "structure", "contents"],
                        premium: 8500,
                        coverage: 5000000,
                        rating: 4.6,
                        features: ["Fire & Lightning", "Theft & Burglary", "Natural Disasters", "Public Liability"],
                        claimRatio: 94.8,
                        bestFor: "Comprehensive home protection",
                        description: "Complete home insurance covering both structure and contents with extensive coverage."
                    },
                    {
                        id: 2,
                        name: "HDFC ERGO Home Insurance",
                        company: "HDFC ERGO",
                        type: ["comprehensive", "tenant"],
                        premium: 7800,
                        coverage: 5000000,
                        rating: 4.5,
                        features: ["Fire & Lightning", "Theft & Burglary", "Natural Disasters", "Electronic Equipment"],
                        claimRatio: 94.2,
                        bestFor: "Tenants and homeowners",
                        description: "Versatile home insurance suitable for both homeowners and tenants."
                    },
                    {
                        id: 3,
                        name: "Bajaj Allianz Home Insurance",
                        company: "Bajaj Allianz",
                        type: ["comprehensive", "structure"],
                        premium: 9200,
                        coverage: 5000000,
                        rating: 4.7,
                        features: ["Fire & Lightning", "Natural Disasters", "Public Liability", "Valuables"],
                        claimRatio: 95.3,
                        bestFor: "Premium home protection",
                        description: "Premium home insurance with high coverage limits and additional benefits."
                    },
                    {
                        id: 4,
                        name: "Reliance Home Insurance",
                        company: "Reliance General",
                        type: ["comprehensive", "contents"],
                        premium: 7200,
                        coverage: 5000000,
                        rating: 4.3,
                        features: ["Fire & Lightning", "Theft & Burglary", "Natural Disasters"],
                        claimRatio: 93.5,
                        bestFor: "Budget home protection",
                        description: "Affordable home insurance with essential coverage features."
                    },
                    {
                        id: 5,
                        name: "Tata AIG Home Secure",
                        company: "Tata AIG",
                        type: ["comprehensive", "structure", "contents"],
                        premium: 8000,
                        coverage: 5000000,
                        rating: 4.6,
                        features: ["Fire & Lightning", "Theft & Burglary", "Natural Disasters", "Public Liability"],
                        claimRatio: 94.6,
                        bestFor: "All types of homes",
                        description: "Comprehensive home insurance suitable for all types of residential properties."
                    }
                ]
            }
        };

        // Current active tab
        let currentTab = 'health';
        let userInputData = null;
        
        // DOM elements
        const navTabs = document.querySelectorAll('.nav-tab');
        const tabContents = document.querySelectorAll('.tab-content');
        const footerTabs = document.querySelectorAll('.footer-tab');
        const summaryContent = document.getElementById('summaryContent');
        const userSummary = document.getElementById('userSummary');
        
        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            // Check for user input data
            checkForUserInput();
            
            // Set up tab navigation
            navTabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabId = this.getAttribute('data-tab');
                    switchTab(tabId);
                });
            });
            
            // Set up footer tab navigation
            footerTabs.forEach(tab => {
                tab.addEventListener('click', function(e) {
                    e.preventDefault();
                    const tabId = this.getAttribute('data-tab');
                    switchTab(tabId);
                    
                    // Scroll to top
                    window.scrollTo({top: 0, behavior: 'smooth'});
                });
            });
            
            // Set up buttons
            document.getElementById('backToInput').addEventListener('click', function() {
                window.location.href = 'insurance-input.html';
            });
            
            document.getElementById('refreshResults').addEventListener('click', function() {
                if (userInputData) {
                    findPolicies(currentTab);
                } else {
                    alert('No user input data found. Please go to the input website first.');
                    window.location.href = 'insurance-input.html';
                }
            });
            
            document.getElementById('editRequirements').addEventListener('click', function() {
                window.location.href = 'insurance-input.html';
            });
            
            // Set up sort/filter events
            setupSortFilterEvents();
            
            // Set up analytics toggle buttons
            setupAnalyticsToggles();
            
            // Set up chatbot
            initChatbot();
            
            // Show sample policies for current tab
            displaySamplePolicies(currentTab);
        });

        // Check for user input data
        function checkForUserInput() {
            // Try to get data from localStorage
            const userInputJSON = localStorage.getItem('insuranceUserInput');
            
            if (userInputJSON) {
                try {
                    userInputData = JSON.parse(userInputJSON);
                    
                    // Switch to the correct insurance tab
                    switchTab(userInputData.insuranceType);
                    
                    // Display user summary
                    displayUserSummary();
                    
                    // Find policies based on user input
                    setTimeout(() => {
                        findPolicies(userInputData.insuranceType);
                    }, 500);
                    
                } catch (e) {
                    console.error('Error parsing user input:', e);
                    showNoDataMessage();
                }
            } else {
                // Check URL parameters as alternative
                const urlParams = new URLSearchParams(window.location.search);
                const type = urlParams.get('type');
                const data = urlParams.get('data');
                
                if (type && data) {
                    try {
                        userInputData = {
                            insuranceType: type,
                            details: JSON.parse(data)
                        };
                        
                        // Switch to the correct insurance tab
                        switchTab(type);
                        
                        // Display user summary
                        displayUserSummary();
                        
                        // Find policies based on user input
                        setTimeout(() => {
                            findPolicies(type);
                        }, 500);
                        
                    } catch (e) {
                        console.error('Error parsing URL parameters:', e);
                        showNoDataMessage();
                    }
                } else {
                    showNoDataMessage();
                }
            }
        }

        // Show no data message
        function showNoDataMessage() {
            userSummary.innerHTML = `
                <div class="summary-title">
                    <i class="fas fa-exclamation-triangle"></i>
                    <h3>No User Input Found</h3>
                </div>
                <div style="text-align: center; padding: 20px;">
                    <p>We couldn't find any insurance requirements from you.</p>
                    <p>Please visit the input website to provide your requirements.</p>
                    <button class="btn btn-primary" style="margin-top: 20px;" onclick="window.location.href='insurance-input.html'">
                        <i class="fas fa-arrow-right"></i> Go to Input Website
                    </button>
                </div>
            `;
        }

        // Display user summary
        function displayUserSummary() {
            if (!userInputData) return;
            
            const data = insuranceData[userInputData.insuranceType];
            if (!data) return;
            
            let summaryHTML = '';
            
            // Add insurance type
            summaryHTML += `
                <div class="summary-item">
                    <span class="summary-label">Insurance Type</span>
                    <span class="summary-value">${data.name}</span>
                </div>
            `;
            
            // Add details based on insurance type
            for (const [key, value] of Object.entries(userInputData.details)) {
                if (Array.isArray(value)) {
                    if (value.length > 0) {
                        summaryHTML += `
                            <div class="summary-item">
                                <span class="summary-label">${formatLabel(key)}</span>
                                <span class="summary-value">${value.map(v => formatValue(v, key)).join(', ')}</span>
                            </div>
                        `;
                    }
                } else {
                    summaryHTML += `
                        <div class="summary-item">
                            <span class="summary-label">${formatLabel(key)}</span>
                            <span class="summary-value">${formatValue(value, key)}</span>
                        </div>
                    `;
                }
            }
            
            summaryContent.innerHTML = summaryHTML;
        }

        // Format label for display
        function formatLabel(label) {
            return label
                .replace(/([A-Z])/g, ' $1')
                .replace(/^./, str => str.toUpperCase())
                .replace('Insurance Type', 'Policy Type')
                .replace('Age Options', 'Age Group')
                .replace('Coverage Amount', 'Coverage')
                .replace('Car Age', 'Car Age')
                .replace('Car Value', 'Car Value')
                .replace('Sum Assured', 'Coverage Amount')
                .replace('Duration', 'Trip Duration');
        }

        // Format value for display
        function formatValue(value, key = '') {
            if (typeof value === 'number') {
                if (key.includes('coverage') || key.includes('value') || key.includes('sum') || key.includes('amount')) {
                    if (value >= 100) {
                        return `₹${(value / 100).toFixed(0)} Lakhs`;
                    }
                    return `₹${value} Lakhs`;
                } else if (key.includes('duration')) {
                    return `${value} Days`;
                }
                return value.toString();
            }
            
            // Map value to display name
            const data = insuranceData[userInputData.insuranceType];
            if (!data) return value;
            
            const fieldMap = {
                'insuranceType': data.types,
                'ageOptions': data.ageOptions,
                'businessType': data.types,
                'sizeOptions': data.sizeOptions,
                'termOptions': data.termOptions,
                'travelType': data.types,
                'destination': data.destinations,
                'propertyType': data.types,
                'carAge': data.ageOptions,
                'businessType': data.types
            };
            
            for (const [field, options] of Object.entries(fieldMap)) {
                if (key.includes(field) && options) {
                    const option = options.find(opt => opt.id === value);
                    return option ? option.name : value;
                }
            }
            
            // For checkbox arrays
            const checkboxMaps = {
                'conditions': data.conditions,
                'features': data.features,
                'usageTypes': data.usageTypes,
                'addons': data.addons,
                'industries': data.industries,
                'coverages': data.coverages,
                'lifestyle': data.lifestyle,
                'travellers': data.travellers,
                'locationRisks': data.locationRisks
            };
            
            for (const [field, options] of Object.entries(checkboxMaps)) {
                if (key.includes(field) && options) {
                    if (Array.isArray(value)) {
                        return value.map(v => {
                            const option = options.find(opt => opt.id === v);
                            return option ? option.name : v;
                        }).join(', ');
                    } else {
                        const option = options.find(opt => opt.id === value);
                        return option ? option.name : value;
                    }
                }
            }
            
            return value;
        }

        // Switch between tabs
        function switchTab(tabId) {
            // Update current tab
            currentTab = tabId;
            
            // Update active nav tab
            navTabs.forEach(tab => {
                if (tab.getAttribute('data-tab') === tabId) {
                    tab.classList.add('active');
                } else {
                    tab.classList.remove('active');
                }
            });
            
            // Show active tab content
            tabContents.forEach(content => {
                if (content.id === `${tabId}-tab`) {
                    content.classList.add('active');
                } else {
                    content.classList.remove('active');
                }
            });
            
            // Update page title
            const data = insuranceData[tabId];
            if (data) {
                document.title = `${data.name} | InsureCompare`;
            }
            
            // If we have user input for this tab, show results
            if (userInputData && userInputData.insuranceType === tabId) {
                findPolicies(tabId);
            } else {
                displaySamplePolicies(tabId);
            }
            
            // Hide analytics sections
            hideAllAnalytics();
        }

        // Set up sort/filter events
        function setupSortFilterEvents() {
            // Health
            document.getElementById('healthSortBy')?.addEventListener('change', function() {
                if (userInputData?.insuranceType === 'health') {
                    findPolicies('health');
                }
            });
            
            document.getElementById('healthFilterBy')?.addEventListener('change', function() {
                if (userInputData?.insuranceType === 'health') {
                    findPolicies('health');
                }
            });
            
            // Car
            document.getElementById('carSortBy')?.addEventListener('change', function() {
                if (userInputData?.insuranceType === 'car') {
                    findPolicies('car');
                }
            });
            
            document.getElementById('carFilterBy')?.addEventListener('change', function() {
                if (userInputData?.insuranceType === 'car') {
                    findPolicies('car');
                }
            });
            
            // Business
            document.getElementById('businessSortBy')?.addEventListener('change', function() {
                if (userInputData?.insuranceType === 'business') {
                    findPolicies('business');
                }
            });
            
            document.getElementById('businessFilterBy')?.addEventListener('change', function() {
                if (userInputData?.insuranceType === 'business') {
                    findPolicies('business');
                }
            });
            
            // Life
            document.getElementById('lifeSortBy')?.addEventListener('change', function() {
                if (userInputData?.insuranceType === 'life') {
                    findPolicies('life');
                }
            });
            
            document.getElementById('lifeFilterBy')?.addEventListener('change', function() {
                if (userInputData?.insuranceType === 'life') {
                    findPolicies('life');
                }
            });
            
            // Travel
            document.getElementById('travelSortBy')?.addEventListener('change', function() {
                if (userInputData?.insuranceType === 'travel') {
                    findPolicies('travel');
                }
            });
            
            document.getElementById('travelFilterBy')?.addEventListener('change', function() {
                if (userInputData?.insuranceType === 'travel') {
                    findPolicies('travel');
                }
            });
            
            // Home
            document.getElementById('homeSortBy')?.addEventListener('change', function() {
                if (userInputData?.insuranceType === 'home') {
                    findPolicies('home');
                }
            });
            
            document.getElementById('homeFilterBy')?.addEventListener('change', function() {
                if (userInputData?.insuranceType === 'home') {
                    findPolicies('home');
                }
            });
        }

        // Set up analytics toggle buttons
        function setupAnalyticsToggles() {
            // Health
            document.getElementById('toggleHealthAnalytics')?.addEventListener('click', function() {
                const analyticsSection = document.getElementById('healthAnalyticsSection');
                if (analyticsSection.style.display === 'none') {
                    analyticsSection.style.display = 'block';
                    this.innerHTML = '<i class="fas fa-chart-line"></i> Hide Analytics';
                } else {
                    analyticsSection.style.display = 'none';
                    this.innerHTML = '<i class="fas fa-chart-line"></i> Show Analytics';
                }
            });
            
            // Car
            document.getElementById('toggleCarAnalytics')?.addEventListener('click', function() {
                const analyticsSection = document.getElementById('carAnalyticsSection');
                if (analyticsSection.style.display === 'none') {
                    analyticsSection.style.display = 'block';
                    this.innerHTML = '<i class="fas fa-chart-line"></i> Hide Analytics';
                } else {
                    analyticsSection.style.display = 'none';
                    this.innerHTML = '<i class="fas fa-chart-line"></i> Show Analytics';
                }
            });
            
            // Business
            document.getElementById('toggleBusinessAnalytics')?.addEventListener('click', function() {
                const analyticsSection = document.getElementById('businessAnalyticsSection');
                if (analyticsSection.style.display === 'none') {
                    analyticsSection.style.display = 'block';
                    this.innerHTML = '<i class="fas fa-chart-line"></i> Hide Analytics';
                } else {
                    analyticsSection.style.display = 'none';
                    this.innerHTML = '<i class="fas fa-chart-line"></i> Show Analytics';
                }
            });
            
            // Life
            document.getElementById('toggleLifeAnalytics')?.addEventListener('click', function() {
                const analyticsSection = document.getElementById('lifeAnalyticsSection');
                if (analyticsSection.style.display === 'none') {
                    analyticsSection.style.display = 'block';
                    this.innerHTML = '<i class="fas fa-chart-line"></i> Hide Analytics';
                } else {
                    analyticsSection.style.display = 'none';
                    this.innerHTML = '<i class="fas fa-chart-line"></i> Show Analytics';
                }
            });
            
            // Travel
            document.getElementById('toggleTravelAnalytics')?.addEventListener('click', function() {
                const analyticsSection = document.getElementById('travelAnalyticsSection');
                if (analyticsSection.style.display === 'none') {
                    analyticsSection.style.display = 'block';
                    this.innerHTML = '<i class="fas fa-chart-line"></i> Hide Analytics';
                } else {
                    analyticsSection.style.display = 'none';
                    this.innerHTML = '<i class="fas fa-chart-line"></i> Show Analytics';
                }
            });
            
            // Home
            document.getElementById('toggleHomeAnalytics')?.addEventListener('click', function() {
                const analyticsSection = document.getElementById('homeAnalyticsSection');
                if (analyticsSection.style.display === 'none') {
                    analyticsSection.style.display = 'block';
                    this.innerHTML = '<i class="fas fa-chart-line"></i> Hide Analytics';
                } else {
                    analyticsSection.style.display = 'none';
                    this.innerHTML = '<i class="fas fa-chart-line"></i> Show Analytics';
                }
            });
        }

        // Hide all analytics sections
        function hideAllAnalytics() {
            const analyticsSections = document.querySelectorAll('.analytics-section');
            analyticsSections.forEach(section => {
                section.style.display = 'none';
            });
            
            // Reset toggle buttons
            const toggleButtons = document.querySelectorAll('[id^="toggle"][id$="Analytics"]');
            toggleButtons.forEach(button => {
                button.innerHTML = '<i class="fas fa-chart-line"></i> Show Analytics';
            });
        }

        // Find policies based on user input
        function findPolicies(type) {
            // Show loading
            const loading = document.getElementById(`${type}LoadingResults`);
            const policyCards = document.getElementById(`${type}PolicyCards`);
            const analyticsSection = document.getElementById(`${type}AnalyticsSection`);
            
            loading.style.display = 'block';
            policyCards.innerHTML = '';
            analyticsSection.style.display = 'none';
            
            // Simulate API call
            setTimeout(() => {
                loading.style.display = 'none';
                
                // Filter policies based on user input
                const filteredPolicies = filterPolicies(type);
                
                // Apply sorting
                const sortedPolicies = sortPolicies(type, filteredPolicies);
                
                // Apply filtering
                const finalPolicies = filterPoliciesByCompany(type, sortedPolicies);
                
                // Take top 5
                const topPolicies = finalPolicies.slice(0, 5);
                
                // Display policies
                displayPolicies(type, topPolicies);
                
                // Show analytics if we have policies
                if (topPolicies.length > 0) {
                    analyticsSection.style.display = 'block';
                    updateAnalytics(type, topPolicies);
                }
                
                // Scroll to results
                policyCards.scrollIntoView({behavior: 'smooth'});
            }, 1500);
        }

        // Filter policies based on user input
        function filterPolicies(type) {
            if (!userInputData || userInputData.insuranceType !== type) {
                return insuranceData[type].policies;
            }
            
            const data = userInputData.details;
            const policies = insuranceData[type].policies;
            
            return policies.filter(policy => {
                // Check if policy supports selected type
                if (type === 'health' && data.insuranceType && !policy.type.includes(data.insuranceType)) return false;
                if (type === 'car' && data.insuranceType && !policy.type.includes(data.insuranceType)) return false;
                if (type === 'business' && data.businessType && !policy.type.includes(data.businessType)) return false;
                if (type === 'life' && data.insuranceType && !policy.type.includes(data.insuranceType)) return false;
                if (type === 'travel' && data.travelType && !policy.type.includes(data.travelType)) return false;
                if (type === 'home' && data.propertyType && !policy.type.includes(data.propertyType)) return false;
                
                // Additional filtering for business insurance
                if (type === 'business' && data.industries && data.industries.length > 0) {
                    const hasIndustryFocus = data.industries.some(industry => 
                        policy.industryFocus && policy.industryFocus.includes(industry)
                    );
                    if (!hasIndustryFocus) return false;
                }
                
                return true;
            });
        }

        // Sort policies
        function sortPolicies(type, policies) {
            const sortBy = document.getElementById(`${type}SortBy`)?.value || 'recommended';
            
            switch(sortBy) {
                case 'price-low':
                    return policies.sort((a, b) => {
                        const premiumA = calculatePremium(type, a);
                        const premiumB = calculatePremium(type, b);
                        return premiumA - premiumB;
                    });
                    
                case 'price-high':
                    return policies.sort((a, b) => {
                        const premiumA = calculatePremium(type, a);
                        const premiumB = calculatePremium(type, b);
                        return premiumB - premiumA;
                    });
                    
                case 'coverage':
                    return policies.sort((a, b) => b.coverage - a.coverage);
                    
                case 'rating':
                    return policies.sort((a, b) => b.rating - a.rating);
                    
                case 'recommended':
                default:
                    // Default sorting: rating descending
                    return policies.sort((a, b) => b.rating - a.rating);
            }
        }

        // Filter policies by company type
        function filterPoliciesByCompany(type, policies) {
            const filterBy = document.getElementById(`${type}FilterBy`)?.value || 'all';
            
            if (filterBy === 'all') return policies;
            
            // In a real app, you would have company type information
            // For now, we'll just return all policies
            return policies;
        }

        // Calculate premium based on policy and user input
        function calculatePremium(type, policy) {
            if (!userInputData || userInputData.insuranceType !== type) {
                return getSamplePremium(type, policy);
            }
            
            const data = userInputData.details;
            
            switch(type) {
                case 'health':
                    if (data.insuranceType === 'individual') return policy.premium.individual;
                    if (data.insuranceType === 'floater') return policy.premium.floater;
                    if (data.insuranceType === 'senior') return policy.premium.senior;
                    return policy.premium.individual || 0;
                    
                case 'car':
                    if (data.carAge === 'new') return policy.premium.new;
                    if (data.carAge === 'mid') return policy.premium.mid;
                    if (data.carAge === 'old') return policy.premium.old;
                    return policy.premium.new || 0;
                    
                case 'business':
                    if (data.businessSize === 'small') return policy.premium.small;
                    if (data.businessSize === 'medium') return policy.premium.medium;
                    if (data.businessSize === 'large') return policy.premium.large;
                    if (data.businessSize === 'startup') return policy.premium.startup;
                    return policy.premium.small || 0;
                    
                case 'life':
                    if (data.term === '10') return policy.premium[10];
                    if (data.term === '20') return policy.premium[20];
                    if (data.term === '30') return policy.premium[30];
                    if (data.term === 'till60') return policy.premium.till60;
                    return policy.premium[20] || 0;
                    
                case 'travel':
                    if (data.destination === 'asia') return policy.premium.asia;
                    if (data.destination === 'europe') return policy.premium.europe;
                    if (data.destination === 'usa') return policy.premium.usa;
                    if (data.destination === 'australia') return policy.premium.australia;
                    if (data.destination === 'domestic') return policy.premium.domestic;
                    return policy.premium.asia || 0;
                    
                case 'home':
                    return policy.premium || 0;
                    
                default:
                    return 0;
            }
        }

        // Get sample premium (when no user input)
        function getSamplePremium(type, policy) {
            switch(type) {
                case 'health':
                    return policy.premium.individual;
                case 'car':
                    return policy.premium.new;
                case 'business':
                    return policy.premium.small;
                case 'life':
                    return policy.premium[20];
                case 'travel':
                    return policy.premium.asia;
                case 'home':
                    return policy.premium;
                default:
                    return 0;
            }
        }

        // Display policies in the results section
        function displayPolicies(type, policies) {
            const policyCards = document.getElementById(`${type}PolicyCards`);
            policyCards.innerHTML = '';
            
            if (policies.length === 0) {
                policyCards.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-search"></i>
                        <h3>No policies found</h3>
                        <p>No insurance policies match your current requirements.</p>
                        <p>Try adjusting your requirements on the input website.</p>
                        <button class="btn btn-primary" onclick="window.location.href='insurance-input.html'">
                            <i class="fas fa-edit"></i> Edit Requirements
                        </button>
                    </div>
                `;
                return;
            }
            
            // Mark the first policy as best (for demo purposes)
            policies.forEach((policy, index) => {
                const isBest = index === 0;
                
                // Calculate premium based on selected options
                let premium = calculatePremium(type, policy);
                
                // Create policy card
                const policyCard = createPolicyCard(type, policy, isBest, premium);
                policyCards.appendChild(policyCard);
            });
        }

        // Create policy card
        function createPolicyCard(type, policy, isBest, premium) {
            let coverageAmount = policy.coverage;
            
            // Adjust coverage based on user input
            if (userInputData && userInputData.insuranceType === type) {
                const data = userInputData.details;
                
                if (type === 'health' && data.coverageAmount) {
                    coverageAmount = data.coverageAmount * 100000;
                } else if (type === 'car' && data.carValue) {
                    coverageAmount = data.carValue * 100000;
                } else if (type === 'business' && data.coverageAmount) {
                    coverageAmount = data.coverageAmount * 100000;
                } else if (type === 'life' && data.sumAssured) {
                    coverageAmount = data.sumAssured * 100000;
                } else if (type === 'home') {
                    const propertyValue = (data.propertyValue || 50) * 100000;
                    const contentsValue = (data.contentsValue || 20) * 100000;
                    coverageAmount = propertyValue + contentsValue;
                }
            }
            
            const policyCard = document.createElement('div');
            policyCard.className = `policy-card ${isBest ? 'best' : ''}`;
            policyCard.innerHTML = `
                ${isBest ? '<div class="best-badge">BEST MATCH</div>' : ''}
                <div class="policy-header">
                    <div>
                        <h3 class="policy-title">${policy.name}</h3>
                        <p class="policy-company">${policy.company}</p>
                    </div>
                    <div class="policy-rating">
                        <i class="fas fa-star"></i> ${policy.rating}/5
                    </div>
                </div>
                
                <p style="color: var(--gray); margin-bottom: 15px;">${policy.description}</p>
                
                <div class="policy-features">
                    ${policy.features.map(feature => `
                        <div class="feature-item">
                            <i class="fas fa-check-circle"></i>
                            <span>${feature}</span>
                        </div>
                    `).join('')}
                </div>
                
                <div class="policy-details">
                    ${getPolicyDetailsHTML(type, policy, coverageAmount)}
                </div>
                
                <div class="policy-actions">
                    <div class="policy-price">
                        ${getPremiumDisplay(type, premium)}
                    </div>
                    <div class="action-buttons">
                        <button class="btn btn-outline-primary btn-sm" onclick="viewPolicyDetails('${type}', ${policy.id})">
                            <i class="fas fa-info-circle"></i> Details
                        </button>
                        <button class="btn btn-primary btn-sm" onclick="buyPolicy('${type}', '${policy.name}', ${premium})">
                            <i class="fas fa-shopping-cart"></i> Buy Now
                        </button>
                    </div>
                </div>
            `;
            return policyCard;
        }

        // Get policy details HTML
        function getPolicyDetailsHTML(type, policy, coverageAmount) {
            let html = '';
            
            switch(type) {
                case 'health':
                    html = `
                        <div class="detail-item">
                            <div class="detail-label">Sum Insured</div>
                            <div class="detail-value">₹${(coverageAmount / 100000).toFixed(1)} Lakhs</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Waiting Period</div>
                            <div class="detail-value">${policy.waitingPeriod}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Network Hospitals</div>
                            <div class="detail-value">${policy.networkHospitals.toLocaleString()}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Claim Settlement</div>
                            <div class="detail-value">${policy.claimRatio}%</div>
                        </div>
                    `;
                    break;
                    
                case 'car':
                    html = `
                        <div class="detail-item">
                            <div class="detail-label">Coverage</div>
                            <div class="detail-value">₹${(coverageAmount / 100000).toFixed(1)} Lakhs</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Insurance Type</div>
                            <div class="detail-value">${policy.type.join(', ')}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Claim Settlement</div>
                            <div class="detail-value">${policy.claimRatio}%</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Best For</div>
                            <div class="detail-value">${policy.bestFor}</div>
                        </div>
                    `;
                    break;
                    
                case 'business':
                    html = `
                        <div class="detail-item">
                            <div class="detail-label">Coverage</div>
                            <div class="detail-value">₹${(coverageAmount / 100000).toFixed(1)} Lakhs</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Insurance Type</div>
                            <div class="detail-value">${policy.type.join(', ')}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Claim Settlement</div>
                            <div class="detail-value">${policy.claimRatio}%</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Best For</div>
                            <div class="detail-value">${policy.bestFor}</div>
                        </div>
                    `;
                    break;
                    
                case 'life':
                    html = `
                        <div class="detail-item">
                            <div class="detail-label">Sum Assured</div>
                            <div class="detail-value">₹${(coverageAmount / 10000000).toFixed(1)} Cr</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Insurance Type</div>
                            <div class="detail-value">${policy.type.join(', ')}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Claim Settlement</div>
                            <div class="detail-value">${policy.claimRatio}%</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Best For</div>
                            <div class="detail-value">${policy.bestFor}</div>
                        </div>
                    `;
                    break;
                    
                case 'travel':
                    const duration = userInputData?.details?.duration || 7;
                    html = `
                        <div class="detail-item">
                            <div class="detail-label">Medical Coverage</div>
                            <div class="detail-value">₹${(policy.coverage / 100000).toFixed(1)} Lakhs</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Trip Duration</div>
                            <div class="detail-value">${duration} Days</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Claim Settlement</div>
                            <div class="detail-value">${policy.claimRatio}%</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Best For</div>
                            <div class="detail-value">${policy.bestFor}</div>
                        </div>
                    `;
                    break;
                    
                case 'home':
                    html = `
                        <div class="detail-item">
                            <div class="detail-label">Total Coverage</div>
                            <div class="detail-value">₹${(coverageAmount / 100000).toFixed(1)} Lakhs</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Insurance Type</div>
                            <div class="detail-value">${policy.type.join(', ')}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Claim Settlement</div>
                            <div class="detail-value">${policy.claimRatio}%</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Best For</div>
                            <div class="detail-value">${policy.bestFor}</div>
                        </div>
                    `;
                    break;
            }
            
            return html;
        }

        // Get premium display
        function getPremiumDisplay(type, premium) {
            switch(type) {
                case 'health':
                case 'car':
                case 'business':
                case 'life':
                    return `₹${premium.toLocaleString()}<span>/year</span>`;
                case 'travel':
                    return `₹${premium.toLocaleString()}<span>/trip</span>`;
                case 'home':
                    return `₹${premium.toLocaleString()}<span>/year</span>`;
                default:
                    return `₹${premium.toLocaleString()}`;
            }
        }

        // Display sample policies (when no user input)
        function displaySamplePolicies(type) {
            const policyCards = document.getElementById(`${type}PolicyCards`);
            
            // Take first 3 policies as samples
            const samplePolicies = insuranceData[type].policies.slice(0, 3);
            
            policyCards.innerHTML = `
                <div class="empty-state">
                    <i class="fas fa-shield-alt"></i>
                    <h3>Compare ${insuranceData[type].name} Policies</h3>
                    <p>Fill in your details on the input website to get personalized policy recommendations.</p>
                    <p style="margin-top: 20px; font-style: italic;">Sample policies shown below:</p>
                </div>
            `;
            
            samplePolicies.forEach((policy, index) => {
                const isBest = index === 0;
                const premium = getSamplePremium(type, policy);
                
                const policyCard = createPolicyCard(type, policy, isBest, premium);
                policyCards.appendChild(policyCard);
            });
        }

        // Update analytics section
        function updateAnalytics(type, policies) {
            // Calculate averages
            let totalPremium = 0;
            let totalCoverage = 0;
            let totalClaimRatio = 0;
            
            policies.forEach(policy => {
                totalPremium += calculatePremium(type, policy);
                totalCoverage += getCoverageAmount(type, policy);
                totalClaimRatio += policy.claimRatio;
            });
            
            const avgPremium = Math.round(totalPremium / policies.length);
            const avgCoverage = Math.round(totalCoverage / policies.length);
            const avgClaimRatio = (totalClaimRatio / policies.length).toFixed(1);
            
            // Update insight values
            updateInsightValues(type, avgPremium, avgCoverage, avgClaimRatio);
            
            // Create charts
            createCharts(type, policies);
        }

        // Get coverage amount
        function getCoverageAmount(type, policy) {
            if (!userInputData || userInputData.insuranceType !== type) {
                return policy.coverage;
            }
            
            const data = userInputData.details;
            
            switch(type) {
                case 'health':
                    return (data.coverageAmount || 10) * 100000;
                case 'car':
                    return (data.carValue || 10) * 100000;
                case 'business':
                    return (data.coverageAmount || 50) * 100000;
                case 'life':
                    return (data.sumAssured || 100) * 100000;
                case 'travel':
                    return policy.coverage;
                case 'home':
                    const propertyValue = (data.propertyValue || 50) * 100000;
                    const contentsValue = (data.contentsValue || 20) * 100000;
                    return propertyValue + contentsValue;
                default:
                    return 0;
            }
        }

        // Update insight values
        function updateInsightValues(type, avgPremium, avgCoverage, avgClaimRatio) {
            switch(type) {
                case 'health':
                    document.getElementById('healthAvgPremium').textContent = `₹${avgPremium.toLocaleString()}`;
                    document.getElementById('healthAvgSettlement').textContent = `${avgClaimRatio}%`;
                    break;
                case 'car':
                    document.getElementById('carAvgPremium').textContent = `₹${avgPremium.toLocaleString()}`;
                    document.getElementById('carAvgSettlement').textContent = `${avgClaimRatio}%`;
                    break;
                case 'business':
                    document.getElementById('businessAvgPremium').textContent = `₹${avgPremium.toLocaleString()}`;
                    document.getElementById('businessAvgSettlement').textContent = `${avgClaimRatio}%`;
                    break;
                case 'life':
                    document.getElementById('lifeAvgPremium').textContent = `₹${avgPremium.toLocaleString()}/yr`;
                    document.getElementById('lifeAvgSettlement').textContent = `${avgClaimRatio}%`;
                    break;
                case 'travel':
                    document.getElementById('travelAvgPremium').textContent = `₹${avgPremium.toLocaleString()}`;
                    break;
                case 'home':
                    document.getElementById('homeAvgPremium').textContent = `₹${avgPremium.toLocaleString()}/yr`;
                    break;
            }
        }

        // Create charts
        function createCharts(type, policies) {
            createPremiumChart(type, policies);
            createFeaturesChart(type, policies);
        }

        // Create premium chart
        function createPremiumChart(type, policies) {
            const ctx = document.getElementById(`${type}PremiumChart`);
            if (!ctx) return;
            
            const policyNames = policies.map(p => p.company);
            const premiums = policies.map(policy => calculatePremium(type, policy));
            
            // Destroy existing chart if it exists
            if (window[`${type}PremiumChart`]) {
                window[`${type}PremiumChart`].destroy();
            }
            
            window[`${type}PremiumChart`] = new Chart(ctx.getContext('2d'), {
                type: 'bar',
                data: {
                    labels: policyNames,
                    datasets: [{
                        label: type === 'travel' ? 'Trip Premium (₹)' : 'Annual Premium (₹)',
                        data: premiums,
                        backgroundColor: premiums.map((p, i) => i === 0 ? insuranceData[type].color : '#3d5afe'),
                        borderColor: premiums.map((p, i) => i === 0 ? insuranceData[type].color : '#2a48ff'),
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Premium (₹)'
                            }
                        }
                    }
                }
            });
        }

        // Create features chart
        function createFeaturesChart(type, policies) {
            const ctx = document.getElementById(`${type}CoverageChart`);
            if (!ctx) return;
            
            // Count features across policies
            const featureCounts = {};
            policies.forEach(policy => {
                policy.features.forEach(feature => {
                    featureCounts[feature] = (featureCounts[feature] || 0) + 1;
                });
            });
            
            // Get top features
            const features = Object.keys(featureCounts)
                .sort((a, b) => featureCounts[b] - featureCounts[a])
                .slice(0, 5);
            
            const counts = features.map(f => featureCounts[f]);
            
            // Destroy existing chart if it exists
            if (window[`${type}CoverageChart`]) {
                window[`${type}CoverageChart`].destroy();
            }
            
            window[`${type}CoverageChart`] = new Chart(ctx.getContext('2d'), {
                type: 'doughnut',
                data: {
                    labels: features,
                    datasets: [{
                        data: counts,
                        backgroundColor: [
                            insuranceData[type].color,
                            '#3d5afe',
                            '#ff9100',
                            '#00c853',
                            '#d50000'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'right'
                        }
                    }
                }
            });
        }

        // Initialize chatbot
        function initChatbot() {
            const chatbotButton = document.getElementById('chatbotButton');
            const chatbotWindow = document.getElementById('chatbotWindow');
            const closeChatbot = document.getElementById('closeChatbot');
            const sendMessage = document.getElementById('sendMessage');
            const chatInput = document.getElementById('chatInput');
            const chatbotBody = document.getElementById('chatbotBody');
            
            chatbotButton.addEventListener('click', function() {
                chatbotWindow.style.display = 'flex';
                chatInput.focus();
            });
            
            closeChatbot.addEventListener('click', function() {
                chatbotWindow.style.display = 'none';
            });
            
            sendMessage.addEventListener('click', sendChatMessage);
            chatInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    sendChatMessage();
                }
            });
            
            // Predefined responses
            const botResponses = {
                'hello': 'Hello! How can I help you with insurance today?',
                'hi': 'Hi there! I can help you compare insurance policies. What type of insurance are you looking for?',
                'health': 'Health insurance covers medical expenses. We can compare individual, family floater, senior citizen, and critical illness policies. What specific information do you need?',
                'car': 'Car insurance is mandatory in India. We offer comprehensive, third-party, and own damage policies. Would you like to compare car insurance options?',
                'business': 'Business insurance protects your company from various risks including property damage, liability, and employee-related risks. What type of business do you have?',
                'life': 'Life insurance provides financial security for your family. We can compare term plans, endowment policies, and ULIPs. What type of life insurance are you interested in?',
                'travel': 'Travel insurance covers trip cancellation, medical emergencies, lost baggage, and more for domestic and international travel. Where are you planning to travel?',
                'home': 'Home insurance protects your property and belongings from fire, theft, natural disasters, and other risks. What type of home insurance are you looking for?',
                'premium': 'Insurance premiums depend on factors like age, coverage amount, health conditions, and policy type. Could you provide more details about what you\'re looking for?',
                'claim': 'Claim settlement ratios show what percentage of claims an insurance company pays out. Higher ratios indicate better claim settlement records. Most top companies have ratios above 90%.',
                'network': 'Network hospitals are hospitals where you can get cashless treatment. Larger networks mean more options for cashless hospitalization.',
                'thanks': 'You\'re welcome! Let me know if you need any more help with insurance.',
                'thank you': 'You\'re welcome! Feel free to ask if you have more questions about insurance.',
                'floater': 'A family floater policy covers all family members under a single sum insured. It\'s usually more cost-effective than individual policies for each member.',
                'individual': 'Individual health insurance covers only one person. It\'s good for singles or when family members have significantly different health conditions.',
                'senior': 'Senior citizen health insurance is specifically designed for people aged 60+. These policies often have higher premiums but cover age-related health issues.',
                'diabetes': 'Many health insurance policies cover diabetes, though there may be waiting periods. Some policies specifically designed for diabetics offer better coverage.',
                'waiting': 'Waiting period is the time during which certain conditions (like pre-existing diseases) are not covered. It typically ranges from 1-4 years depending on the policy.',
                'cashless': 'Cashless hospitalization allows you to get treatment without paying upfront at network hospitals. The insurance company settles bills directly with the hospital.',
                'coverage': 'Coverage amount or sum insured is the maximum amount the insurance company will pay in a policy year. It should be based on your healthcare needs and location.',
                'default': 'I can help you compare insurance policies, explain terms, and find the best options. Try asking about specific insurance types or features.'
            };
            
            function sendChatMessage() {
                const message = chatInput.value.trim();
                if (!message) return;
                
                // Add user message to chat
                const userMessage = document.createElement('div');
                userMessage.className = 'chat-message user-message';
                userMessage.textContent = message;
                chatbotBody.appendChild(userMessage);
                
                // Clear input
                chatInput.value = '';
                
                // Scroll to bottom
                chatbotBody.scrollTop = chatbotBody.scrollHeight;
                
                // Simulate typing delay
                setTimeout(() => {
                    // Get bot response
                    let response = botResponses.default;
                    const lowerMessage = message.toLowerCase();
                    
                    for (const [key, value] of Object.entries(botResponses)) {
                        if (lowerMessage.includes(key)) {
                            response = value;
                            break;
                        }
                    }
                    
                    // Add bot message to chat
                    const botMessage = document.createElement('div');
                    botMessage.className = 'chat-message bot-message';
                    botMessage.textContent = response;
                    chatbotBody.appendChild(botMessage);
                    
                    // Scroll to bottom
                    chatbotBody.scrollTop = chatbotBody.scrollHeight;
                }, 1000);
            }
        }

        // View policy details
        function viewPolicyDetails(type, policyId) {
            alert(`${type} Policy details view would open for policy ID: ${policyId}. In the full version, this would show complete policy details, terms, and conditions.`);
        }

        // Buy policy
        function buyPolicy(type, policyName, premium) {
            alert(`You've selected ${policyName} for ${getPremiumDisplay(type, premium)}. In the full version, you would be redirected to the insurance company's website to complete the purchase.`);
        }
    </script>
</body>
</html>





